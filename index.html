<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>jsort - JavaScript sort algorithms</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta http-equiv="Cache-Control" content="No-Cache">
    <script type="text/javascript" src="array.js"></script>
    <script type="text/javascript" src="string.js"></script>
    <script type="text/javascript" src="benchmark.js"></script>
    <script type="text/javascript" src="native.js"></script>
    <script type="text/javascript" src="quick.js"></script>
    <script type="text/javascript" src="merge.js"></script>
    <script type="text/javascript" src="shell.js"></script>
    <script type="text/javascript" src="bubble.js"></script>
    <script type="text/javascript" src="selection.js"></script>
    <script type="text/javascript" src="heap.js"></script>
    <script type="text/javascript" src="radix.js"></script>
    <script type="text/javascript" src="gnome.js"></script>

    <script type="text/javascript">
        function appendText(string, father){
            var pE = document.createElement('p');
            var tN = document.createTextNode(string);
            pE.appendChild(tN);
            father.appendChild(pE);
        }
        window.onload = function(){
            var min = 0, max = 10000, size = 1000,
                arr = randomArr(size, min, max).unique(),
                sortedArr = arr.clone().sort(function(a,b){return a-b}).unique(),
                stringArr = arr.clone().numberToString(),
                d = document,
                resultsEl = d.getElementById('results'),
                maxD = stringArr.getMaxStringLength();

            appendText('Testes realizados com arrays randÃ´micas de '+size+' inteiros entre '+min+' e '+max+'.', d.getElementById('res-title'))
            //stringArr.forEach(toString);
            //maxD = stringArr.getMaxStringLength();
            var results = bm({
                'native': {'fn': nSort, 'args': [arr.clone()]},
                'quick': {'fn': quickSort, 'args': [arr.clone()]},
                'merge': {'fn': mergeSort, 'args': [arr.clone()]},
                'shell': {'fn': shellSort, 'args': [arr.clone()]},
                'bubble': {'fn': bubbleSort, 'args': [arr.clone()]},
                'selection': {'fn': selectionSort, 'args': [arr.clone()]},
                'heap': {'fn': heapSort, 'args': [arr.clone()]},
                'radix': {'fn': radixSort, 'args': [stringArr.clone().forEach(
                    function(el, i, arr){
                        arr[i] = el.padLeft(maxD, '0');
                    }
                )]},
                'gnome': {'fn': gnomeSort, 'args': [arr.clone()]}
            });

            for(sName in results){
                var txt = sName + ': ' + results[sName].time + 'ms' + ' -> ';
                txt += (sortedArr.compare(results[sName].arr.unique()))?'PASS':'FAIL';
                appendText(txt, resultsEl);
                console.log(results[sName]);
            }
        }
    </script>
</head>
<body>
    <div id="results">
        <p id="res-title">
        </p>
    </div>
</body>
</html>
